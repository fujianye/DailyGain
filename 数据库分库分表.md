# 分库
分为水平分库和垂直分库
## 水平分库
每个库的结构都一样，没有明显的业务归属。
## 垂直分库
每个库的结构都不一样，有明显的业务归属。
垂直分库之后，基本上就可以服务化了。例如，随着业务的发展一些公用的配置表、字典表等越来越多，这时可以将这些表拆到单独的库中，甚至可以服务化。
再有，随着业务的发展孵化出了一套业务模式，这时可以将相关的表拆到单独的库中，甚至可以服务化。

# 分表
分为水平分表和垂直分表
## 水平分表
* 特点：每个表的结构都一样。
* 适用场景：表的数据量大，单次SQL执行效率高，CPU负担大。
* 效果：水平分表之后，单表的数据量少了，单次SQL执行效率高，自然减轻了CPU的负担。
## 垂直分表
* 特点：每个表的结构都不一样。
* 适用场景：表的记录并不多，但是字段多，并且热点数据和非热点数据在一起，单行数据所需的存储空间较大。
以至于数据库缓存的数据行减少，查询时会去读磁盘数据产生大量的随机读IO，产生IO瓶颈。
* 效果：垂直分表是，按照字段的活跃性，将表中字段拆到不同的表（主表和扩展表）中。
垂直分表的拆分原则是将热点数据（可能会冗余经常一起查询的数据）放在一起作为主表，非热点数据放在一起作为扩展表。
这样更多的热点数据就能被缓存下来，进而减少了随机读IO。拆了之后，要想获得全部数据就需要关联两个表来取数据。
但记住，千万别用join，因为join不仅会增加CPU负担并且会讲两个表耦合在一起（必须在一个数据库实例上）。
关联数据，应该在业务Service层做文章，分别获取主表和扩展表数据然后用关联字段关联得到全部数据。

