# 1、闭包定义
闭包是由函数和与其相关的引用环境组合而成的实体。
「函数」和「函数内部能访问到的变量」（也叫环境）的总和，就是一个闭包。
关键要点有俩： 
1、一个含有自由变量的函数； 
2、这些自由变量所在的环境。 
外部环境持有内部函数所使用的自由变量，对内部函数形成“闭包”，就这样。 
简单但不严格的说，一个函数的“自由变量”就是既不是参数也不是局部变量的变量。 

一个纯粹（无副作用)的函数如果不含有自由变量，那么每次用相同的参数调用后的得到的结果肯定是一样的。但如果一个函数含有自由变量，那么调用返回的结果不但依赖于参数的值，还依赖于自由变量的值。因此一个含有自由变量的函数要正确执行，必须保证其所依赖的外围环境的存在。 

# 2、闭包与函数的区别
闭包只是在形式和表现上像函数，但实际上不是函数。函数是一些可执行的代码，这些代码在函数被定义后就确定了，不会在执行时发生变化，所以一个函数只有一个实例。闭包在运行时可以有多个实例，不同的引用环境和相同的函数组合可以产生不同的实例。所谓引用环境是指在程序执行中的某个点所有处于活跃状态的约束所组成的集合。其中的约束是指一个变量的名字和其所代表的对象之间的联系。

# 3、一个编程语言需要哪些特性来支持闭包呢？
下面列出一些比较重要的条件：
函数是一阶值；
函数可以嵌套定义；
可以捕获引用环境，并
把引用环境和函数代码组成一个可调用的实体；
允许定义匿名函数；
这些条件并不是必要的，但具备这些条件能说明一个编程语言对闭包的支持较为完善。另外需要注意，有些语言使用与函数定义不同的语法来定义这种能被传递的"函数"，如 Ruby 中的 Block。这实际上是语法糖，只是为了更容易定义匿名函数而已，本质上没有区别。

借用一个非常好的说法来做个总结：对象是附有行为的数据，而闭包是附有数据的行为。

# 4、闭包的优缺点
## 优点
1.可以使用同级的作用域
2.读取其他元素的内部变量
3.延长作用域

## 缺点
1.作用域没有那么直观
2.因为变量不会被垃圾回收所以有一定的内存占用问题。

# 4、闭包的应用
闭包可以用优雅的方式来处理一些棘手的问题，有些程序员声称没有闭包简直就活不下去了。这虽然有些夸张，却从侧面说明闭包有着强大的功能。下面列举了一些闭包应用。

## 加强模块化
闭包有益于模块化编程，它能以简单的方式开发较小的模块，从而提高开发速度和程序的可复用性。和没有使用闭包的程序相比，使用闭包可将模块划分得更小。
举例：

## 抽象
闭包是数据和行为的组合，这使得闭包具有较好抽象能力，下面的代码通过闭包来模拟面向对象编程。
举例：

## 简化代码

举例：

# 5、java中的闭包
## 1）java类是闭包
因为Java的“对象”其实就是一个闭包。其实无论是闭包也好，对象也好，都是一种数据封装的手段。
基于类的面向对象程序语言中，方法是用的自由变量是来自其所在的类的实例的。像这样： 
Java代码  
class Foo {  
    private int x;  
    int AddWith( int y ) { return x + y; }  
}  

这样的AddWith()有一个参数y和一个自由变量x，其返回的值既依赖于参数的值也依赖于自由变量的值。为了让AddWith()正确工作，它必须依附于Foo的一个实例，不然就得不到x的值了（称为：“变量i未与值相绑定”）。很好理解对吧。不过面向对象的语言里一般不把类称为闭包，没为什么，就是种习惯。 
当然严格来说方法所捕获的自由变量不是i，而是this；x是通过this来访问到的，完整写出应该是this.x。

闭包与对象是从两个完全不同的角度描述了一件事情：一段代码与其环境的关系。
所以可以用对象来模拟（实现）闭包，也可以用闭包来模拟（实现）对象。

## 2）内部类是闭包
Java内部类是闭包：包含指向外部类的指针
Java内部类是闭包：包含指向外部类的指针

# 总结

参考：
https://www.ibm.com/developerworks/cn/linux/l-cn-closure/index.html
https://rednaxelafx.iteye.com/blog/245022
https://www.zhihu.com/question/27416568/answer/36565794
